# Kritaでクローンレイヤを使ったアニメーションを実現するスクリプト

ペイントレイヤしかアニメーションが作れないKrita(現在5.2.9)で、グループやファイル参照等どんなレイヤでもクローンレイヤさえ作ってしまえばアニメーションができるようにするスクリプトです。

各クローンレイヤの表示・非表示を切り替えるだけなのでクローンレイヤの数は増えますが、クローン元のデータをいじれば即座に反映されるので修正で爆発することを抑えられると思います。

![Gs1QFbmbUAAox97](https://github.com/user-attachments/assets/2eef2caa-6d46-49dd-887a-2912d1226496)

データ入力にCSVを使いますので、別ソフトでコマ打ちスクリプト用にCSVや表計算シートを使っていた場合は移植が気持ち楽になるかと思います。

## インストール
一式(komauchiフォルダとkomauchi.desktop)をKritaのユーザースクリプト置き場`通常はC:/Users/<ユーザー名>/AppData/Roaming/krita/pykrita/`に配置してKritaを再起動してください。

Kritaの設定を開きPythonプラグインの設定で`コマ打ち from CSV`を有効にしてKritaを再度再起動してください。

![image](https://github.com/user-attachments/assets/8681e063-bc66-4625-a76e-adf966eec1b5)

## 使い方

ツールメニューのスクリプトから実行できます。

![image](https://github.com/user-attachments/assets/df061bbd-1c16-4579-8aa6-d51d9b652064)

スクリプトを実行するとファイルオープンダイアログが表示されますのでコマ打ち情報の入ったCSVファイルを指定してください。

## CSVファイルの書き方

最低限としては、キー番号に対応するクローンレイヤの設定とフレームごとの各セルのキー番号が必要です。

行の先頭が#の場合その行はコメントとして扱われます。

### 例
セルAの1フレームから3フレームまで目開きを、4フレーム目以降に目閉じを表示する設定です

```csv
@key, A, 目閉じ, 目開き

# FrameNo, A, B, C, ...
1, 2,
2, ,
3, ,
4, 1,
```
Kritaで`目閉じ`と`目開き`というクローンレイヤがあれば、不透明度を操作して表示・非表示を設定します。

なお空のフレームは省略できます。

```csv
@key, A, 目閉じ, 目開き

# FrameNo, A, B, C, ...
1, 2,
4, 1,
```
